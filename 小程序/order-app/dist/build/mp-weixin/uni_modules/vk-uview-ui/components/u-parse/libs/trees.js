"use strict";var t=require("../../../../../common/vendor.js"),a=require("./config.js"),e={abbr:1,b:1,big:1,code:1,del:1,em:1,i:1,ins:1,label:1,q:1,small:1,span:1,strong:1,sub:1,sup:1};let r={Parser:{}};const s=a.cfg.errorImg,i={components:{trees:()=>Promise.resolve().then((function(){return l}))},name:"trees",data:()=>({ctrl:[],placeholder:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="225"/>',errorImg:s,loadVideo:"undefined"==typeof plus,c:"",s:""}),props:{nodes:Array,lazyLoad:Boolean,loading:String},mounted(){for(this.top=this.$parent;"parser"!=this.top.$options.name;this.top=this.top.$parent);this.init()},methods:{init(){for(var a,e=this.nodes.length;a=this.nodes[--e];)if("img"==a.name)this.top.imgList.setItem(a.attrs.i,a.attrs["original-src"]||a.attrs.src);else if("video"==a.name||"audio"==a.name){var r;"video"==a.name?r=t.index.createVideoContext(a.attrs.id,this):this.$refs[a.attrs.id]&&(r=this.$refs[a.attrs.id][0]),r&&(r.id=a.attrs.id,this.top.videoContexts.push(r))}},play(t){var a=this.top.videoContexts;if(a.length>1&&this.top.autopause)for(var e=a.length;e--;)a[e].id!=t.currentTarget.dataset.id&&a[e].pause()},imgtap(a){var e=a.currentTarget.dataset.attrs;if(!e.ignore){var s=!0,i={id:a.target.id,src:e.src,ignore:()=>s=!1};if(r.Parser.onImgtap&&r.Parser.onImgtap(i),this.top.$emit("imgtap",i),s){var o=this.top.imgList,l=o[e.i]?parseInt(e.i):(o=[e.src],0);t.index.previewImage({current:l,urls:o})}}},loadImg(t){var a=t.currentTarget.dataset.i;this.lazyLoad&&!this.ctrl[a]?this.$set(this.ctrl,a,1):this.loading&&2!=this.ctrl[a]&&this.$set(this.ctrl,a,2)},linkpress(a){var e=!0,s=a.currentTarget.dataset.attrs;if(s.ignore=()=>e=!1,r.Parser.onLinkpress&&r.Parser.onLinkpress(s),this.top.$emit("linkpress",s),e){if(s["app-id"])return t.index.navigateToMiniProgram({appId:s["app-id"],path:s.path});s.href&&("#"==s.href[0]?this.top.useAnchor&&this.top.navigateTo({id:s.href.substring(1)}):0==s.href.indexOf("http")||0==s.href.indexOf("//")?t.index.setClipboardData({data:s.href,success:()=>t.index.showToast({title:"链接已复制"})}):t.index.navigateTo({url:s.href,fail(){t.index.switchTab({url:s.href})}}))}},error(t){var a=t.currentTarget,e=a.dataset.source,r=a.dataset.i;if("video"==e||"audio"==e){var s=this.ctrl[r]?this.ctrl[r].i+1:1;s<this.nodes[r].attrs.source.length&&this.$set(this.ctrl,r,s),t.detail.__args__&&(t.detail=t.detail.__args__[0])}this.top&&this.top.$emit("error",{source:e,target:a,errMsg:t.detail.errMsg})},_loadVideo(t){this.$set(this.ctrl,t.target.dataset.i,0)},use:t=>!t.c&&!e[t.name]&&-1==(t.attrs.style||"").indexOf("display:inline")}};if(!Array){t.resolveComponent("trees")()}var o=t._export_sfc(i,[["render",function(a,e,r,s,i,o){return{a:t.f(r.nodes,((a,e,s)=>t.e({a:"img"==a.name},"img"==a.name?t.e({b:0!=i.ctrl[e]},0!=i.ctrl[e]?{c:[{attrs:{src:r.loading&&(i.ctrl[e]||0)<2?r.loading:r.lazyLoad&&!i.ctrl[e]?i.placeholder:3==i.ctrl[e]?i.errorImg:a.attrs.src||"",alt:a.attrs.alt||"",width:a.attrs.width||"",style:"-webkit-touch-callout:none;max-width:100%;display:block"+(a.attrs.height?";height:"+a.attrs.height:"")},name:"img"}]}:{},{d:r.lazyLoad&&!i.ctrl[e]?i.placeholder:a.attrs.src,e:r.lazyLoad,f:!a.attrs.ignore,g:e,h:a.attrs.i,i:t.o(((...t)=>o.loadImg&&o.loadImg(...t))),j:t.o(((...t)=>o.error&&o.error(...t))),k:t.n("_img "+a.attrs.class),l:t.s(a.attrs.style),m:a.attrs,n:t.o(((...t)=>o.imgtap&&o.imgtap(...t)))}):"text"==a.type?{p:t.t(a.text)}:"br"==a.name?{}:(a.lazyLoad&&!a.attrs.autoplay||"video"==a.name&&!i.loadVideo)&&null==i.ctrl[e]?{s:a.attrs.id,t:t.n("_video "+(a.attrs.class||"")),v:t.s(a.attrs.style),w:e,x:t.o(((...t)=>o._loadVideo&&o._loadVideo(...t)))}:"video"==a.name?{z:a.attrs.id,A:t.n(a.attrs.class),B:t.s(a.attrs.style),C:a.attrs.autoplay||0==i.ctrl[e],D:a.attrs.controls,E:a.attrs.loop,F:a.attrs.muted,G:a.attrs.poster,H:a.attrs.source[i.ctrl[e]||0],I:a.attrs["unit-id"],J:a.attrs.id,K:e,L:t.o(((...t)=>o.error&&o.error(...t))),M:t.o(((...t)=>o.play&&o.play(...t)))}:"audio"==a.name?{O:a.attrs.id,P:t.n(a.attrs.class),Q:t.s(a.attrs.style),R:a.attrs.author,S:a.attrs.autoplay,T:a.attrs.controls,U:a.attrs.loop,V:a.attrs.name,W:a.attrs.poster,X:a.attrs.source[i.ctrl[e]||0],Y:e,Z:a.attrs.id,aa:t.o(((...t)=>o.error&&o.error(...t))),ab:t.o(((...t)=>o.play&&o.play(...t)))}:"a"==a.name?{ad:"89596f7a-0-"+s,ae:t.p({c:"_span",nodes:a.children}),af:a.attrs.id,ag:t.n("_a "+(a.attrs.class||"")),ah:t.s(a.attrs.style),ai:a.attrs,aj:t.o(((...t)=>o.linkpress&&o.linkpress(...t)))}:"li"==a.name?t.e({al:"ol"==a.type},"ol"==a.type?{am:t.t(a.num)}:t.e({an:a.floor%3==0},(a.floor%3==0||a.floor,{}),{ao:a.floor%3==2}),{ap:"89596f7a-1-"+s,aq:t.p({c:"_li",nodes:a.children,lazyLoad:r.lazyLoad,loading:r.loading}),ar:a.attrs.id,as:t.n(a.attrs.class),at:t.s((a.attrs.style||"")+";display:flex;flex-direction:row")}):"table"==a.name&&a.c&&a.flag?{aw:t.f(a.children,((a,e,r)=>({a:e,b:t.n(a.attrs.class),c:t.s(a.attrs.style),d:"89596f7a-2-"+s+"-"+r,e:t.p({c:a.attrs.class,s:a.attrs.style,nodes:a.children})}))),ax:a.attrs.id,ay:t.n(a.attrs.class),az:t.s((a.attrs.style||"")+";display:grid")}:"table"==a.name&&a.c?{aB:t.f(a.children,((a,e,r)=>({a:t.f(a.children,((a,e,i)=>t.e({a:"td"==a.name},"td"==a.name?{b:"89596f7a-3-"+s+"-"+r+"-"+i,c:t.p({nodes:a.children})}:{d:t.f(a.children,((a,e,o)=>({a:e,b:t.n(a.attrs.class),c:t.s((a.attrs.style||"")+("t"==a.name[0]?";display:table-"+("tr"==a.name?"row":"cell"):"")),d:"89596f7a-4-"+s+"-"+r+"-"+i+"-"+o,e:t.p({c:a.attrs.class,s:(a.attrs.style||"")+("t"==a.name[0]?";display:table-"+("tr"==a.name?"row":"cell"):""),nodes:a.children})})))},{e:e,f:t.n(a.attrs.class),g:t.s((a.attrs.style||"")+("t"==a.name[0]?";display:table-"+("tr"==a.name?"row":"cell"):""))}))),b:e,c:t.n(a.attrs.class),d:t.s((a.attrs.style||"")+("t"==a.name[0]?";display:table-"+("tr"==a.name?"row":"row-group"):""))}))),aC:a.attrs.id,aD:t.n(a.attrs.class),aE:t.s((a.attrs.style||"")+";display:table")}:o.use(a)?{aG:a.attrs.id,aH:t.n("_p __"+a.name),aI:[a]}:{aJ:t.n((a.attrs.id||"")+" _"+a.name+" "+(a.attrs.class||"")),aK:t.s(a.attrs.style),aL:"89596f7a-5-"+s,aM:t.p({c:(a.attrs.id||"")+" _"+a.name+" "+(a.attrs.class||""),s:a.attrs.style,nodes:a.children,lazyLoad:r.lazyLoad,loading:r.loading})},{o:"text"==a.type,q:"br"==a.name,r:(a.lazyLoad&&!a.attrs.autoplay||"video"==a.name&&!i.loadVideo)&&null==i.ctrl[e],y:"video"==a.name,N:"audio"==a.name,ac:"a"==a.name,ak:"li"==a.name,av:"table"==a.name&&a.c&&a.flag,aA:"table"==a.name&&a.c,aF:o.use(a),aN:e}))),b:t.n("interlayer "+(i.c||"")),c:t.s(i.s)}}]]);wx.createComponent(o);var l=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
