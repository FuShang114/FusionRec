"use strict";var e=require("../../common/vendor.js"),o=require("../../api/user.js");if(require("../../common/http.js"),require("../../store/user.js"),!Array){(e.resolveComponent("u-picker")+e.resolveComponent("u-button"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-picker/u-picker.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const a={__name:"address",setup(a){const s=e.ref(!1);e.ref("");const r=e.reactive({margin:"20px"}),n=e=>{console.log(e),e.detail.value?d.status="1":d.status="0"},t=()=>{s.value=!0},i=e=>{console.log(e),d.area=e.province.name+"/"+e.city.name+"/"+e.area.name,console.log(d.area)},d=e.reactive({addressId:"",openid:e.index.getStorageSync("openid"),userName:"",phone:"",area:"",address:"",status:"0"}),u=async()=>{if(console.log(d),!d.userName)return void e.index.showToast({icon:"none",title:"请填写姓名"});if(!d.phone)return void e.index.showToast({icon:"none",title:"请填写电话"});if(!d.area)return void e.index.showToast({icon:"none",title:"请选择区域"});if(!d.address)return void e.index.showToast({icon:"none",title:"请填写详细地址"});let a=null;a="0"==l.value?await o.addAddressApi(d):await o.editAddressApi(d),console.log(a),a&&200==a.code&&e.index.navigateBack()},l=e.ref("0");return e.onLoad((e=>{if(console.log(e),e.item){l.value="1";const o=JSON.parse(e.item);d.addressId=o.addressId,d.phone=o.phone,d.userName=o.userName,d.area=o.area,d.address=o.address,d.status=o.status}})),(o,a)=>({a:d.userName,b:e.o((e=>d.userName=e.detail.value)),c:d.phone,d:e.o((e=>d.phone=e.detail.value)),e:o.line,f:d.area,g:e.o((e=>d.area=e.detail.value)),h:e.o(i),i:e.o(t),j:d.address,k:e.o((e=>d.address=e.detail.value)),l:"1"==d.status,m:e.o(n),n:e.sr("uPicker","da127792-0"),o:e.o(i),p:e.o((e=>s.value=e)),q:e.p({mode:"region",modelValue:s.value}),r:e.o(u),s:e.p({"custom-style":r,type:"warning"})})}};var s=e._export_sfc(a,[["__scopeId","data-v-da127792"]]);wx.createPage(s);
