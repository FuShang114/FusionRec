"use strict";var e=require("../../common/vendor.js"),t=require("../../store/car.js"),r=require("../../store/order.js");const a={__name:"car",setup(a){const o=t.carStore(),n=r.orderStore();e.ref(!0);const l=e.ref(!0);e.ref(!0);const s=e.computed$1((()=>(0==o.carList.length?l.value=!1:l.value=!0,o.carList))),c=()=>{1==l.value?(l.value=!1,o.carList.forEach((e=>{e.flag=!1}))):(l.value=!0,o.carList.forEach((e=>{e.flag=!0})))},i=e.computed$1((()=>{let e=0;return o.carList.map((t=>{t.flag?e+=t.num:e+=0})),e})),u=e.computed$1((()=>{let e=0;return o.carList.map((t=>{t.flag?e+=t.num*t.price:e+=0})),e})),g=t=>{if(n.orderList=[],0==o.carList.length)return void e.index.showToast({icon:"none",title:"请选择菜品"});let r=o.carList.filter((e=>1==e.flag));0!=r.length?(n.addOrderList(r),e.index.navigateTo({url:"../confirm/confirm"})):e.index.showToast({icon:"none",title:"请选择要结算的菜品"})};return(t,r)=>e.e({a:e.unref(s).length>0},e.unref(s).length>0?{b:e.f(e.unref(s),((t,r,a)=>({a:t.flag,b:e.o((e=>((e,t)=>{console.log(e),console.log(t),1==t.flag?t.flag=!1:t.flag=!0,o.carList.filter((e=>1==e.flag)).length==o.carList.length?l.value=!0:l.value=!1})(e,t))),c:t.goodsImage,d:e.t(t.goodsName),e:e.t(t.specsName),f:e.t(t.price),g:e.t(t.goodsUnit),h:e.o((e=>(e=>{let t=e.num;t>1?t-=1:(t=1)&&o.carList.map(((t,r)=>{t.goodsId==e.goodsId&&o.carList.splice(r,1)})),e.num=t,0==o.carList.length&&(l.value=!1)})(t))),i:e.t(t.num),j:e.o((e=>(e=>{let t=e.num;e.num=t+1})(t))),k:r})))}:{},{c:l.value,d:e.o(c),e:e.t(e.unref(u)),f:e.t(e.unref(i)),g:e.o(g)})}};wx.createPage(a);
