"use strict";var e=require("../../common/vendor.js"),o=require("../../api/user.js"),l=require("../../common/http.js"),a=require("../../store/user.js");if(!Array){(e.resolveComponent("u-cell-item")+e.resolveComponent("u-cell-group"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-cell-item/u-cell-item.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-cell-group/u-cell-group.js"))();const t={__name:"mine",setup(t){const n=a.userStore(),r=e.getCurrentInstance(),i=e.computed$1((()=>n.nickName?n.nickName:"")),u=e.computed$1((()=>n.avatarUrl?l.http.baseUrl+n.avatarUrl:"/static/user.jpg")),s=l=>{console.log(l),u.value=l.detail.avatarUrl,o.uploadImageApi({url:"/api/upload/uploadImage",filePath:l.detail.avatarUrl}).then((l=>{console.log(l);let a=JSON.parse(l);o.saveOrUpdateApi({openid:e.index.getStorageSync("openid"),avatarUrl:a.data}).then((e=>{console.log(e),n.avatarUrl=a.data}))}))},c=l=>{console.log(l),e.index.createSelectorQuery().in(r).select("#nickname-input").fields({properties:["value"]}).exec((l=>{var a,t;console.log(l),i.value=null==(a=null==l?void 0:l[0])?void 0:a.value,console.log("昵称",i.value),o.saveOrUpdateApi({openid:e.index.getStorageSync("openid"),nickName:null==(t=null==l?void 0:l[0])?void 0:t.value}).then((e=>{var o;console.log(e),n.nickName=null==(o=null==e?void 0:e[0])?void 0:o.value}))}))},d=()=>{e.index.navigateTo({url:"../order/order"})},p=()=>{e.index.navigateTo({url:"../addresslist/addresslist"})},v=()=>{e.index.navigateTo({url:"../collect/collect"})};return e.onShow((()=>{o.userLogin()})),(o,l)=>({a:e.unref(u),b:e.o(s),c:e.o(c),d:e.unref(i),e:e.o((o=>e.isRef(i)?i.value=o.detail.value:null)),f:e.o(d),g:e.p({icon:"star",title:"我的订单"}),h:e.o(v),i:e.p({icon:"photo",title:"我的收藏"}),j:e.o(p),k:e.p({icon:"coupon",title:"我的地址"})})}};wx.createPage(t);
