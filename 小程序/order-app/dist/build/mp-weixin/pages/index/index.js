"use strict";var e=require("../../common/vendor.js"),a=require("../../api/home.js"),o=require("../../api/reco.js"),t=require("../../api/user.js");if(require("../../common/http.js"),require("../../store/user.js"),!Array){(e.resolveComponent("u-divider")+e.resolveComponent("u-lazy-load")+e.resolveComponent("u-waterfall"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-divider/u-divider.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-lazy-load/u-lazy-load.js")+(()=>"../../uni_modules/vk-uview-ui/components/u-waterfall/u-waterfall.js"))();const i={__name:"index",setup(i){const s=e.ref("/static/goodscar.png");e.ref("400");const d=e.ref(!0),n=e.ref(!0),r=e.ref(2e3),l=e.ref(500),u=e.ref([]),c=e.ref([]),p=async()=>{let e=await a.getHotListApi();e&&200==e.code&&(c.value=e.data)},g=async(a=[])=>{const t=e.index.getStorageSync("openid");if(!t||!a||0==a.length)return;const i=a.map((e=>({openid:t,goodsId:e.goodsId,eventType:"expose",scene:"home_hot"})));await o.reportRecoEventBatchApi(i)},m=async a=>{await(async a=>{const t=e.index.getStorageSync("openid");t&&a&&a.goodsId&&await o.reportRecoEventBatchApi([{openid:t,goodsId:a.goodsId,eventType:"click",scene:"home_hot"}])})(a),console.log(a),e.index.navigateTo({url:"../detail/detail?goods="+encodeURIComponent(JSON.stringify(a))})};return e.onLoad((async()=>{await t.userLogin(),(async()=>{let e=await a.getSwipperListApi();e&&200==e.code&&(u.value=e.data)})(),(async()=>{const a=e.index.getStorageSync("openid");let t=await o.getRecoListApi({openid:a,scene:"home_hot",size:20});if(t&&200==t.code&&t.data&&t.data.items&&t.data.items.length>0)return c.value=t.data.items,void g(c.value);await p()})()})),(a,o)=>({a:e.f(u.value,((a,o,t)=>({a:a.images.split(",")[0],b:e.o((e=>m(a.sysGoods)),o),c:o}))),b:d.value,c:n.value,d:r.value,e:l.value,f:e.p({"margin-top":"20","margin-bottom":"20",color:"#F3AF28"}),g:e.w((({leftList:a},o,t)=>({a:e.f(a,((a,o,i)=>({a:e.o((e=>m(a))),b:"a71701da-2-"+t+"-"+i+",a71701da-1",c:e.p({threshold:"-450","border-radius":"10",image:a.goodsImage.split(",")[0],index:o}),d:e.t(a.goodsName),e:e.t(a.specs[0].goodsPrice),f:e.o((e=>m(a))),g:o}))),b:t,c:o})),{name:"left",path:"g",vueId:"a71701da-1"}),h:s.value,i:e.w((({rightList:a},o,t)=>({a:e.f(a,((a,o,i)=>({a:e.o((e=>m(a))),b:"a71701da-3-"+t+"-"+i+",a71701da-1",c:e.p({threshold:"-450","border-radius":"10",image:a.goodsImage.split(",")[0],index:o}),d:e.t(a.goodsName),e:e.t(a.specs[0].goodsPrice),f:e.o((e=>m(a))),g:o}))),b:t,c:o})),{name:"right",path:"i",vueId:"a71701da-1"}),j:s.value,k:e.sr("uWaterfall","a71701da-1"),l:e.o((e=>c.value=e)),m:e.p({modelValue:c.value})})}};wx.createPage(i);
